---
import { Icon } from "astro-icon/components";
import planet from "./planet.svg?raw";
import Navigation from "./Navigation.astro";
import ToggleMenu from "./ToggleMenu.astro";
---

<div id="mobile-menu" class="fixed inset-0 z-50 hidden bg-background transition-colors duration-300 md:hidden">
    <div class="flex h-full flex-col">
        <div class="flex items-center justify-between p-4 border-b border-secondary-100 dark:border-secondary-800">
            <a href="/" class="flex items-center w-12 h-12 text-secondary-600 dark:text-secondary-200">
                <Fragment set:html={planet} />
            </a>
            <ToggleMenu iconName="tabler:x" />
        </div>
        <nav class="flex-1 overflow-y-auto p-4 flex flex-col" aria-label="Mobile navigation">
            <Navigation isMobile={true} />
        </nav>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const toggleButtons = document.querySelectorAll('[data-aw-toggle-menu]');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenu) {
            toggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                    document.body.style.overflow = mobileMenu.classList.contains('hidden') ? '' : 'hidden';
                });
            });
        }
    });
</script>
